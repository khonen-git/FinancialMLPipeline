# @package _global_
# Configuration based on proven methodology from previous project
# 
# KEY PARAMETERS (from user's successful project):
# - 100 tick bars (not 1000)
# - 5 pips TP/SL = 50 ticks (not 100)
# - Fixed horizon: 32 bars for setup, 8 for localization
# - MFE/MAE features for optimal TP/SL selection

experiment:
  name: "eurusd_2023_bars100_tp50"
  description: "100-tick bars, 50-tick TP/SL, binary classification, proven setup"
  tags: ["eurusd", "2023", "bars100", "tp50", "binary", "proven"]

assets:
  symbol: "EURUSD"
  tick_size: 0.0001  # 1 pip = 10 ticks
  pip_value: 0.0001
  min_lot: 0.01
  max_lot: 100.0

session:
  session_start: "00:00"
  session_end: "21:55"
  friday_end: "20:00"
  weekend_trading: false

data:
  dukascopy:
    raw_dir: "data/raw"
    filename: "EURUSD_2023.csv"
    format: "csv"
  bars:
    type: "tick"
    threshold: 100  # 100 ticks per bar (proven from previous project)

labeling:
  triple_barrier:
    tp_ticks: 50  # 5 pips (proven from previous project)
    sl_ticks: 50  # 5 pips
    max_horizon_bars: 32  # Fixed horizon (proven optimal)
    min_horizon_bars: 32  # Force exactly 32 bars
    distance_mode: "ticks"
    drop_time_barrier: true  # Binary classification only

features:
  returns_lookbacks: [1, 5, 10, 20]
  volatility_lookbacks: [10, 20, 50]
  range_lookbacks: [10, 20]
  spread_stats_lookbacks: [5, 10]
  order_flow_lookbacks: [5, 10, 20]
  ma_periods: [5, 10, 20, 50]
  # MFE/MAE parameters
  mfe_mae:
    enabled: true
    horizon_bars: 32
    quantile: 0.5  # Median

models:
  hmm:
    macro:
      enabled: false
      n_states: 3
    micro:
      enabled: false
      n_states: 3
  random_forest:
    params:
      n_estimators: 200
      max_depth: 10
      min_samples_leaf: 20
      n_jobs: -1
      class_weight: "balanced"
    calibration:
      enabled: false
    scoring: "precision"

validation:
  n_splits: 3
  train_duration: 6000
  test_duration: 2000
  purge_window: 50
  embargo_duration: 20

risk:
  mc_simulations: 1000
  starting_capital: 10000.0
  max_daily_loss: 0.03
  max_total_drawdown: 0.2

reporting:
  enabled: true
  output_dir: "outputs/reports"

mlflow:
  enabled: true
  tracking_uri: "file:./mlruns"
  experiment_name: "eurusd_2023_bars100_tp50"

runtime:
  log_level: "INFO"
  gpu_enabled: false

